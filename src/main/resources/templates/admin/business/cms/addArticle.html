<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<link rel="stylesheet" href="/css/summernote.css"></link>
<script type="text/javascript" src="/js/summernote.js"></script>
<script type="text/javascript" src="/js/summernote-zh-CN.js"></script>
<script type="text/javascript" src="/js/cms/article.js"></script>

<body>
	<section class="content-header">
		<h1>管理员 面板</h1>
		<ol class="breadcrumb">
			<li><a href="#"><i class="fa fa-dashboard"></i> 文章管理</a></li>
		</ol>
	</section>
	<h5 class="page-header"></h5>
	<!-- 内容主体 -->
	<div class="container">
		<div class="row-fluid">
			<div class="col-md-12">
				<form class="form-horizontal">
					<div class="form-group">
						<label>文章标题</label> <input type="text" class="form-control"
							id="articleTitle" placeholder="请输入标题" />
					</div>
					<div class="form-group">
						<label>作者</label> <input type="text" class="form-control"
							id="articleAuthor" placeholder="请输入作者" />
					</div>
					<div class="form-group">
						<label>文章内容</label>
						<div id="summernote"></div>
					</div>
					<button type="button" id="saveArticle" class="btn btn-primary">保存文章</button>
				</form>
			</div>
		</div>
	</div>
	<h5 class="page-header"></h5>
</body>
<script th:inline="javascript">
var header = [[${_csrf.headerName}]];
var token =[[${_csrf.token}]];
	$('#summernote').summernote({
        height: 260,
        minHeight: 150,
	    maxHeight: 300,
		lang : 'zh-CN',
		focus : true,
	    callbacks: {
				onImageUpload:
				function(files) { 
					alert(files[0])
					upArticle(files[0],header, token);
			          		}
				}
	});
	//绑定函数上传文章内容
	$("#saveArticle").click(function(){
		var flag=confirm("确认发布文章: " + $('#articleTitle').val()+"--作者: "+$('#articleAuthor').val() + " 吗？");
		if(true==flag){
		var data=	 JSON.stringify({title: $('#articleTitle').val(),
	        		createBy: $('#articleAuthor').val(),
	        		articleContents: $('#summernote').summernote('code')
	        		});
		saveEditArticle(data);
	     }else{return false;}
	})
</script>
</html>